/**
 * Hilo 1.1.0 for commonjs
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
var Hilo=function(){var e=window,t=document,o=t.documentElement,a=0,r={};return{version:"1.1.0",getUid:function(e){var t=++a;if(e){var o=e.charCodeAt(e.length-1);return o>=48&&o<=57&&(e+="_"),e+t}return t},viewToString:function(e){for(var t,o=e;o;)t=t?o.id+"."+t:o.id,o=o.parent;return t},copy:function(e,t,o){for(var a in t)o&&!e.hasOwnProperty(a)&&void 0===e[a]||(e[a]=t[a]);return r.copy||(r.copy=!0,console.warn("Hilo.copy has been Deprecated! Use Hilo.util.copy instead.")),e},browser:function(){var a=navigator.userAgent,r={iphone:/iphone/i.test(a),ipad:/ipad/i.test(a),ipod:/ipod/i.test(a),ios:/iphone|ipad|ipod/i.test(a),android:/android/i.test(a),webkit:/webkit/i.test(a),chrome:/chrome/i.test(a),safari:/safari/i.test(a),firefox:/firefox/i.test(a),ie:/msie/i.test(a),opera:/opera/i.test(a),supportTouch:"ontouchstart"in e,supportCanvas:null!=t.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in e,supportDeviceMotion:"ondevicemotion"in e};try{var i="hilo";localStorage.setItem(i,i),localStorage.removeItem(i),r.supportStorage=!0}catch(n){}var s=r.jsVendor=r.webkit?"webkit":r.firefox?"webkit":r.opera?"o":r.ie?"ms":"",d=r.cssVendor="-"+s+"-",c=t.createElement("div"),p=c.style,h=void 0!=p[s+"Transform"],f=void 0!=p[s+"Perspective"];return f&&(c.id="test3d",p=t.createElement("style"),p.textContent="@media ("+d+"transform-3d){#test3d{height:3px}}",t.head.appendChild(p),o.appendChild(c),f=3==c.offsetHeight,t.head.removeChild(p),o.removeChild(c)),r.supportTransform=h,r.supportTransform3D=f,r}(),event:function(){var t="ontouchstart"in e;return{POINTER_START:t?"touchstart":"mousedown",POINTER_MOVE:t?"touchmove":"mousemove",POINTER_END:t?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(t){var a;try{a=t.getBoundingClientRect()}catch(r){a={top:t.offsetTop,left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,bottom:t.offsetTop+t.offsetHeight}}var i=(e.pageXOffset||o.scrollLeft)-(o.clientLeft||0)||0,n=(e.pageYOffset||o.scrollTop)-(o.clientTop||0)||0,s=e.getComputedStyle?getComputedStyle(t):t.currentStyle,d=parseInt,c=d(s.paddingLeft)+d(s.borderLeftWidth)||0,p=d(s.paddingTop)+d(s.borderTopWidth)||0,h=d(s.paddingRight)+d(s.borderRightWidth)||0,f=d(s.paddingBottom)+d(s.borderBottomWidth)||0,l=a.top||0,g=a.left||0,m=a.right||0,u=a.bottom||0;return{left:g+i+c,top:l+n+p,width:m-h-g-c,height:u-f-l-p}},createElement:function(e,o){var a,r,i,n=t.createElement(e);for(a in o)if(r=o[a],"style"===a)for(i in r)n.style[i]=r[i];else n[a]=r;return n},getElement:function(e){return t.getElementById(e)},setElementStyleByView:function(e){var t=e.drawable,o=t.domElement.style,a=e._stateCache||(e._stateCache={}),r=Hilo.browser.jsVendor,i="px",n=!1;if(this.cacheStateIfChanged(e,["visible"],a)&&(o.display=e.visible?"":"none"),this.cacheStateIfChanged(e,["alpha"],a)&&(o.opacity=e.alpha),e.visible&&!(e.alpha<=0)){this.cacheStateIfChanged(e,["width"],a)&&(o.width=e.width+i),this.cacheStateIfChanged(e,["height"],a)&&(o.height=e.height+i),this.cacheStateIfChanged(e,["depth"],a)&&(o.zIndex=e.depth+1),(n=this.cacheStateIfChanged(e,["pivotX","pivotY"],a))&&(o[r+"TransformOrigin"]=e.pivotX+i+" "+e.pivotY+i),(this.cacheStateIfChanged(e,["x","y","rotation","scaleX","scaleY"],a)||n)&&(o[r+"Transform"]=this.getTransformCSS(e)),this.cacheStateIfChanged(e,["background"],a)&&(o.backgroundColor=e.background),o.pointerEvents||(o.pointerEvents="none");var s=t.image;if(s){var d=s.src;d!==a.image&&(a.image=d,o.backgroundImage="url("+d+")");var c=t.rect;if(c){var p=c[0],h=c[1];p!==a.sx&&(a.sx=p,o.backgroundPositionX=-p+i),h!==a.sy&&(a.sy=h,o.backgroundPositionY=-h+i)}}var f=e.mask;if(f){var l=f.drawable.domElement.style.backgroundImage;l!==a.maskImage&&(a.maskImage=l,o[r+"MaskImage"]=l,o[r+"MaskRepeat"]="no-repeat");var g=f.x,m=f.y;g===a.maskX&&m===a.maskY||(a.maskX=g,a.maskY=m,o[r+"MaskPosition"]=g+i+" "+m+i)}}},cacheStateIfChanged:function(e,t,o){var a,r,i,n,s=!1;for(a=0,r=t.length;a<r;a++)i=t[a],n=e[i],n!=o[i]&&(o[i]=n,s=!0);return s},getTransformCSS:function(e){var t=this.browser.supportTransform3D,o=t?"3d":"";return"translate"+o+"("+(e.x-e.pivotX)+"px, "+(e.y-e.pivotY)+(t?"px, 0px)":"px)")+"rotate"+o+(t?"(0, 0, 1, ":"(")+e.rotation+"deg)scale"+o+"("+e.scaleX+", "+e.scaleY+(t?", 1)":")")}}}();module.exports=Hilo;