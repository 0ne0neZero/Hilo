/**
 * Hilo 1.0.2 for cmd
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
define(function(l,i,t){var e=l("hilo/core/Hilo"),n=l("hilo/core/Class"),a=l("hilo/view/View"),r=l("hilo/view/CacheMixin"),o=function(){var l=document.createElement("canvas"),i=l.getContext&&l.getContext("2d");return n.create({Extends:a,Mixes:r,constructor:function(l){l=l||{},this.id=this.id||l.id||e.getUid("Graphics"),o.superclass.constructor.call(this,l),this._actions=[]},lineWidth:1,lineAlpha:1,lineCap:null,lineJoin:null,miterLimit:10,hasStroke:!1,strokeStyle:"0",hasFill:!1,fillStyle:"0",fillAlpha:0,lineStyle:function(l,i,t,e,n,a){var r=this,o=r._addAction;return o.call(r,["lineWidth",r.lineWidth=l||1]),o.call(r,["strokeStyle",r.strokeStyle=i||"0"]),o.call(r,["lineAlpha",r.lineAlpha=t||1]),void 0!=e&&o.call(r,["lineCap",r.lineCap=e]),void 0!=n&&o.call(r,["lineJoin",r.lineJoin=n]),void 0!=a&&o.call(r,["miterLimit",r.miterLimit=a]),r.hasStroke=!0,r},beginFill:function(l,i){var t=this,e=t._addAction;return e.call(t,["fillStyle",t.fillStyle=l]),e.call(t,["fillAlpha",t.fillAlpha=i||1]),t.hasFill=!0,t},endFill:function(){var l=this,i=l._addAction;return l.hasStroke&&i.call(l,["stroke"]),l.hasFill&&i.call(l,["fill"]),l.setCacheDirty(!0),l},beginLinearGradientFill:function(l,t,e,n,a,r){for(var o=this,c=i.createLinearGradient(l,t,e,n),h=0,d=a.length;h<d;h++)c.addColorStop(r[h],a[h]);return o.hasFill=!0,o._addAction(["fillStyle",o.fillStyle=c])},beginRadialGradientFill:function(l,t,e,n,a,r,o,c){for(var h=this,d=i.createRadialGradient(l,t,e,n,a,r),s=0,u=o.length;s<u;s++)d.addColorStop(c[s],o[s]);return h.hasFill=!0,h._addAction(["fillStyle",h.fillStyle=d])},beginBitmapFill:function(l,t){var e=this,n=i.createPattern(l,t||"");return e.hasFill=!0,e._addAction(["fillStyle",e.fillStyle=n])},beginPath:function(){return this._addAction(["beginPath"])},closePath:function(){return this._addAction(["closePath"])},moveTo:function(l,i){return this._addAction(["moveTo",l,i])},lineTo:function(l,i){return this._addAction(["lineTo",l,i])},quadraticCurveTo:function(l,i,t,e){return this._addAction(["quadraticCurveTo",l,i,t,e])},bezierCurveTo:function(l,i,t,e,n,a){return this._addAction(["bezierCurveTo",l,i,t,e,n,a])},drawRect:function(l,i,t,e){return this._addAction(["rect",l,i,t,e])},drawRoundRectComplex:function(l,i,t,e,n,a,r,o){var c=this,h=c._addAction;return h.call(c,["moveTo",l+n,i]),h.call(c,["lineTo",l+t-a,i]),h.call(c,["arc",l+t-a,i+a,a,-Math.PI/2,0,!1]),h.call(c,["lineTo",l+t,i+e-r]),h.call(c,["arc",l+t-r,i+e-r,r,0,Math.PI/2,!1]),h.call(c,["lineTo",l+o,i+e]),h.call(c,["arc",l+o,i+e-o,o,Math.PI/2,Math.PI,!1]),h.call(c,["lineTo",l,i+n]),h.call(c,["arc",l+n,i+n,n,Math.PI,3*Math.PI/2,!1]),c},drawRoundRect:function(l,i,t,e,n){return this.drawRoundRectComplex(l,i,t,e,n,n,n,n)},drawCircle:function(l,i,t){return this._addAction(["arc",l+t,i+t,t,0,2*Math.PI,0])},drawEllipse:function(l,i,t,e){var n=this;if(t==e)return n.drawCircle(l,i,t);var a=n._addAction,r=t/2,o=e/2,c=.5522847498307933,h=c*r,d=c*o;return l+=r,i+=o,a.call(n,["moveTo",l+r,i]),a.call(n,["bezierCurveTo",l+r,i-d,l+h,i-o,l,i-o]),a.call(n,["bezierCurveTo",l-h,i-o,l-r,i-d,l-r,i]),a.call(n,["bezierCurveTo",l-r,i+d,l-h,i+o,l,i+o]),a.call(n,["bezierCurveTo",l+h,i+o,l+r,i+d,l+r,i]),n},drawSVGPath:function(l){var i=this,t=i._addAction,e=l.split(/,| (?=[a-zA-Z])/);t.call(i,["beginPath"]);for(var n=0,a=e.length;n<a;n++){var r=e[n],o=r[0].toUpperCase(),c=r.substring(1).split(/,| /);switch(0==c[0].length&&c.shift(),o){case"M":t.call(i,["moveTo",c[0],c[1]]);break;case"L":t.call(i,["lineTo",c[0],c[1]]);break;case"C":t.call(i,["bezierCurveTo",c[0],c[1],c[2],c[3],c[4],c[5]]);break;case"Z":t.call(i,["closePath"])}}return i},_draw:function(l){var i,t=this,e=t._actions,n=e.length;for(l.beginPath(),i=0;i<n;i++){var a=e[i],r=a[0],o=a.length>1?a.slice(1):null;"function"==typeof l[r]?l[r].apply(l,o):l[r]=a[1]}},render:function(l,i){var t=this;"canvas"===l.renderType?t._draw(l.context):(t.cache(),l.draw(t))},clear:function(){var l=this;return l._actions.length=0,l.lineWidth=1,l.lineAlpha=1,l.lineCap=null,l.lineJoin=null,l.miterLimit=10,l.hasStroke=!1,l.strokeStyle="0",l.hasFill=!1,l.fillStyle="0",l.fillAlpha=1,l.setCacheDirty(!0),l},_addAction:function(l){var i=this;return i._actions.push(l),i}})}();return o});